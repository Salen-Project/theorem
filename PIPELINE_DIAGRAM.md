# TheoremExplainAgent Pipeline Visual Diagram

## Pipeline Flow

```
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                                    INPUT                                             │
│  ┌─────────────────────────────────────────────────────────────────────────────┐    │
│  │ Theorem: "IEEE Conversion: The IEEE-754 standard describes floating-point  │    │
│  │ formats, a way to represent real numbers in hardware."                     │    │
│  └─────────────────────────────────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────────────────────────────────┘
                                        │
                                        ▼
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                                PLANNER AGENT                                        │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐              │
│  │ Scene       │  │ Vision      │  │ Technical   │  │ Animation   │              │
│  │ Outline     │  │ Storyboard  │  │ Implem.     │  │ & Narration │              │
│  │ Plan        │  │ Plan        │  │ Plan        │  │ Plan        │              │
│  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘              │
│         │                │                │                │                      │
│         └────────────────┼────────────────┼────────────────┘                      │
│                          ▼                ▼                ▼                      │
│  ┌─────────────────────────────────────────────────────────────────────────────┐    │
│  │                    Structured Plans (XML Format)                           │    │
│  └─────────────────────────────────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────────────────────────────────┘
                                        │
                                        ▼
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                              AGENTIC RAG (ROUTER)                                  │
│  ┌─────────────────────────────────────────────────────────────────────────────┐    │
│  │                           Query Generator                                   │    │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐        │    │
│  │  │ Code        │  │ Error       │  │ Storyboard  │  │ Technical   │        │    │
│  │  │ Generation  │  │ Fixing      │  │ Queries     │  │ Implem.     │        │    │
│  │  │ Queries     │  │ Queries     │  │             │  │ Queries     │        │    │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘        │    │
│  └─────────────────────────────────────────────────────────────────────────────┘    │
│                                        │                                            │
│                                        ▼                                            │
│  ┌─────────────────────────────────────────────────────────────────────────────┐    │
│  │                    Documentation Retrieval                                  │    │
│  │  ┌─────────────────────┐  ┌─────────────────────┐                          │    │
│  │  │ Core Documentation  │  │ Plugin Documentation│                          │    │
│  │  │ (Manim API, etc.)   │  │ (manim-physics,     │                          │    │
│  │  │                     │  │  manim-chemistry,   │                          │    │
│  │  │                     │  │  manim-dsa, etc.)   │                          │    │
│  │  └─────────────────────┘  └─────────────────────┘                          │    │
│  └─────────────────────────────────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────────────────────────────────┘
                                        │
                                        ▼
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                                 CODE AGENT                                         │
│  ┌─────────────────────────────────────────────────────────────────────────────┐    │
│  │                    Initial Code Generation (Version 0)                     │    │
│  │  ┌─────────────────────────────────────────────────────────────────────┐  │    │
│  │  │ from manim import *                                                │  │    │
│  │  │ class IEEEOverview(Scene):                                         │  │    │
│  │  │     def construct(self):                                           │  │    │
│  │  │         arrow = Arrow(start=mantissa[0][0].get_edge(UP) + UP * 0.1,│  │    │
│  │  │                     end=mantissa[0][0].get_edge(DOWN),             │  │    │
│  │  │                     color=YELLOW, buff=0.1)                       │  │    │
│  │  └─────────────────────────────────────────────────────────────────────┘  │    │
│  └─────────────────────────────────────────────────────────────────────────────┘    │
│                                        │                                            │
│                                        ▼                                            │
│  ┌─────────────────────────────────────────────────────────────────────────────┐    │
│  │                    Error Detection & Analysis                               │    │
│  │  ┌─────────────────────────────────────────────────────────────────────┐  │    │
│  │  │ TypeError: Mobject._getattr_<locals>.getter() takes 1 positional   │  │    │
│  │  │ argument but 2 were given                                            │  │    │
│  │  │                                                                       │  │    │
│  │  │ <THINKING>                                                           │  │    │
│  │  │ Error Type: TypeError                                                │  │    │
│  │  │ Root Cause: 'get_edge()' requires only one argument which is the    │  │    │
│  │  │ direction (LEFT, RIGHT, UP, DOWN etc.)                              │  │    │
│  │  │ Solution: Use 'get_left()' and 'get_right()' instead                │  │    │
│  │  └─────────────────────────────────────────────────────────────────────┘  │    │
│  └─────────────────────────────────────────────────────────────────────────────┘    │
│                                        │                                            │
│                                        ▼                                            │
│  ┌─────────────────────────────────────────────────────────────────────────────┐    │
│  │                    Code Fix Generation (Version 1)                          │    │
│  │  ┌─────────────────────────────────────────────────────────────────────┐  │    │
│  │  │ from manim import *                                                │  │    │
│  │  │ class IEEEOverview(Scene):                                         │  │    │
│  │  │     def construct(self):                                           │  │    │
│  │  │         arrow = Arrow(start=mantissa[0][0].get_left() + UP * 0.1,  │  │    │
│  │  │                     end=mantissa[0][0].get_right(),                │  │    │
│  │  │                     color=YELLOW, buff=0.1)                       │  │    │
│  │  └─────────────────────────────────────────────────────────────────────┘  │    │
│  └─────────────────────────────────────────────────────────────────────────────┘    │
│                                        │                                            │
│                                        ▼                                            │
│  ┌─────────────────────────────────────────────────────────────────────────────┐    │
│  │                              Validation                                      │    │
│  │  ┌─────────────────────────────────────────────────────────────────────┐  │    │
│  │  │                    ✅ Code Successfully Generated                    │  │    │
│  │  └─────────────────────────────────────────────────────────────────────┘  │    │
│  └─────────────────────────────────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────────────────────────────────┘
                                        │
                                        ▼
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                                RENDERED VIDEO                                      │
│  ┌─────────────────────────────────────────────────────────────────────────────┐    │
│  │                                                                             │    │
│  │  ┌─────────────────────────────────────────────────────────────────────┐  │    │
│  │  │ Single-Precision Exponent (8 bits) Normal                          │  │    │
│  │  │ [Zero] [32] [64] [96] [128] [160] [192] [224] [Infinity/NaN]       │  │    │
│  │  └─────────────────────────────────────────────────────────────────────┘  │    │
│  │                                                                             │    │
│  │  ┌─────────────────────────────────────────────────────────────────────┐  │    │
│  │  │ Double-Precision Exponent (11 bits) Normal                          │  │    │
│  │  │ [Zero] [256] [512] [768] [1024] [1280] [1536] [1792] [Infinity/NaN]│  │    │
│  │  └─────────────────────────────────────────────────────────────────────┘  │    │
│  │                                                                             │    │
│  │  ActualExponent = BiasedExponent - Bias                                   │  │    │
│  │  SinglePrecisionBias = 127                                                │  │    │
│  │                                                                             │    │
│  │  🔊 [Play] ▶️                                                              │  │    │
│  └─────────────────────────────────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────────────────────────────────┘
```

## Agent Interaction Flow

```
┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│   Planner   │    │  Agentic    │    │    Code     │
│   Agent     │    │    RAG      │    │   Agent     │
└─────────────┘    └─────────────┘    └─────────────┘
       │                   │                   │
       │                   │                   │
       ▼                   ▼                   ▼
┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│ 1. Scene    │    │ 1. Query    │    │ 1. Initial  │
│    Outline  │    │    Gen.     │    │    Code     │
│             │    │             │    │   (V0)      │
│ 2. Vision   │    │ 2. Core     │    │             │
│    Storyboard│   │    Docs     │    │ 2. Error    │
│             │    │             │    │   Detection │
│ 3. Technical│    │ 3. Plugin   │    │             │
│    Implem.  │    │    Docs     │    │ 3. Error    │
│             │    │             │    │   Analysis  │
│ 4. Animation│    │             │    │             │
│    & Narration│  │             │    │ 4. Code     │
│             │    │             │    │   Fix (V1)  │
└─────────────┘    └─────────────┘    └─────────────┘
       │                   │                   │
       └───────────────────┼───────────────────┘
                           │
                           ▼
                    ┌─────────────┐
                    │   Video     │
                    │  Renderer   │
                    └─────────────┘
                           │
                           ▼
                    ┌─────────────┐
                    │  Rendered   │
                    │   Video     │
                    └─────────────┘
```

## Self-Debugging Process

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           Self-Debugging Flow                                │
└─────────────────────────────────────────────────────────────────────────────┘
                                        │
                                        ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                    Initial Code Generation (Version 0)                     │
│  ┌─────────────────────────────────────────────────────────────────────┐  │
│  │ arrow = Arrow(start=mantissa[0][0].get_edge(UP) + UP * 0.1,        │  │
│  │               end=mantissa[0][0].get_edge(DOWN), color=YELLOW)      │  │
│  └─────────────────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────────────┘
                                        │
                                        ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                            Error Detection                                  │
│  ┌─────────────────────────────────────────────────────────────────────┐  │
│  │ ❌ TypeError: get_edge() takes 1 positional argument but 2 were     │  │
│  │    given                                                             │  │
│  └─────────────────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────────────┘
                                        │
                                        ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                         Error Analysis & Root Cause                        │
│  ┌─────────────────────────────────────────────────────────────────────┐  │
│  │ <THINKING>                                                           │  │
│  │ Error Type: TypeError                                                │  │
│  │ Root Cause: 'get_edge()' requires only one argument                 │  │
│  │ Solution: Use 'get_left()' and 'get_right()' instead                │  │
│  └─────────────────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────────────┘
                                        │
                                        ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                        Code Fix Generation (Version 1)                     │
│  ┌─────────────────────────────────────────────────────────────────────┐  │
│  │ arrow = Arrow(start=mantissa[0][0].get_left() + UP * 0.1,          │  │
│  │               end=mantissa[0][0].get_right(), color=YELLOW)         │  │
│  └─────────────────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────────────┘
                                        │
                                        ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                              Validation                                     │
│  ┌─────────────────────────────────────────────────────────────────────┐  │
│  │                    ✅ Code Successfully Generated                    │  │
│  └─────────────────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────────────┘
```

## Key Features Demonstrated

1. **Multi-Agent Coordination**: Three specialized agents working together
2. **Self-Debugging**: Code Agent can identify and fix its own errors
3. **Retrieval-Augmented Generation**: RAG system provides contextual documentation
4. **Progressive Planning**: Structured approach from high-level to implementation
5. **Visual Output**: Final rendered video with mathematical visualizations
6. **Error Correction**: Specific example of Manim API error detection and fixing
7. **Modular Architecture**: Each agent has well-defined responsibilities
8. **Documentation Integration**: Seamless access to Manim and plugin documentation